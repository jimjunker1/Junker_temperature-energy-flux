---
output:
   word_document:
      reference_docx: working_docx_template_nonumbers.docx
      toc: no
      pandoc_args:
      - '--lua-filter=scholarly-metadata.lua'
      # - '--lua-filter=author-info-blocks.lua'
      - '--filter=pandoc-crossref.exe'
   pdf_document:
     keep_tex: true
   html_document: default
   pandoc_args:
      - '--lua-filter=scholarly-metadata.lua'
      # - '--lua-filter=author-info-blocks.lua'
      - '--filter=pandoc-crossref.exe'
header-includes:
- \usepackage{amsmath}
- \numberwithin{equation}
- \includegraphics{doc/revision/tempDOY.png}
indent: true
linestretch: 1
bibliography: refs.bib
link-citations: no
link-color: grey
csl: ecology.csl
nocite: |
  @junker2019
---

```{r import general objects, echo=FALSE, message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
here::i_am('doc/Junker_temp-energy-flux_appendixS2.Rmd')
source(here::here("packages.R"))

```

Appendix S2: Supporting information for Junker, J. R., W. F. Cross, J. M. Hood, J. P. Benstead, A. D. Huryn, D. Nelson, J. S. Ólafsson, and G. M. Gíslason, *Environmental warming increases the importance of high-turnover energy channels in stream food webs*.

## Appendix S2

Appendix S2: Figure S1

```{r give me an image please, fig.cap="Figure S1. Daily mean temperature (°C) across study streams for each day of year (doy) over the course of the study. Legend represents the annual mean temperate within each stream. This figure was modified from Junker 2019 with permissiom."}

knitr::include_graphics(here::here("doc/revision/tempDOY.png"), rel_path = FALSE)
```

\newpage

Appendix S2: Figure S2

```{r spp trait plot, fig.width=7.5, fig.height=8.5, fig.cap = "Appendix S2: Figure S2. Species-level distributions of population variables (median $\\pm$ median absolute deviations) observed across all streams in the study. a) total annual organic matter flux, b) standing population biomass, c) population abundance, and d) mean individual body size. All variables have been log~10~-transformed."}
drake::loadd(spp_trait_histograms)
grid.draw(spp_trait_histograms[['spp_trait_plot']])
```

\newpage

Appendix S2: Table S1

```{r GINI table, echo = FALSE, warning=FALSE, message=FALSE}
tab1_caption = "Appendix S2:Table S1. Evenness of organic matter fluxes among consumers within a stream community measured by the Gini index, both raw (\\'non-normalized\\') and \\'normalized\\' for consumer richness"

drake::loadd(gini_analysis)
gini_analysis[["stream_gini_summary"]] %>% 
   dplyr::mutate(across(where(is.numeric),.fns = ~signif(.,2))) %>% 
   dplyr::mutate("Non-normalized Gini" = paste0(`Non-normalized Gini_mean`," ( ",`Non-normalized Gini_quant2.5`," - ", `Non-normalized Gini_quant97.5`," )"),
                 "Normalized Gini" = paste0(`Normalized Gini_mean`," ( ", `Normalized Gini_quant2.5`," - ", `Normalized Gini_quant97.5`," )")) %>% select(site, `Non-normalized Gini`,`Normalized Gini`) %>%
   dplyr::mutate(site = factor(site, levels = names(stream_order_list))) %>%
   knitr::kable(align = "lrr", caption = tab1_caption)

```

\newpage

Appendix S2: Figure S3

```{r raw lorenz, echo=FALSE, message=FALSE, warning = FALSE, dpi = 400, fig.cap="Appendix S2:Figure S3. Lorenz plot of relative community flux by species in ascending order of annual population organic matter flux (g AFDM m^-2^ y^-1^)"}

drake::loadd(lorenz_skew_fig)
lorenz_skew_fig[["lorenz_flux_plot"]]

```

\newpage

Appendix S2: Figure S4

```{r biomass lorenz, echo=FALSE, message=FALSE, warning=FALSE, dpi = 400, fig.cap="Appendix S2:Figure S4. Cumulative plot of relative community flux by species in relation to mean annual population biomass (mg m^-2^)."}

lorenz_skew_fig[["bio_lorenz_flux_plot"]]

```

\newpage

Appendix S2: Figure S5

```{r skew distribution, echo = FALSE, warning=FALSE, message=FALSE, fig.cap="Appendix S2:Figure S5. Probability distribution of empirical Sk~flux~ measurements in relation to (a) mean body size and (b) annual P:B compared to random species ordering. The red lines represent the 2.5% and 97.5% percentiles of the Sk~flux~ values from random ordering distributions in each stream community."}
drake::loadd(random_skew_fig)
grid.arrange(random_skew_fig[["M_perc_plot"]], random_skew_fig[["pb_perc_plot"]], ncol = 1, left = text_grob(""))

```
